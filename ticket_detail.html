<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
{% extends "layout.html" %}
{% block content %}
<h2>Ticket #{{ ticket.id }}</h2>
<p><strong>User:</strong> {{ ticket.user }}</p>
<p><strong>Subject:</strong> {{ ticket.subject }}</p>
<p><strong>Description:</strong> {{ ticket.description }}</p>
<p><strong>Category:</strong> {{ ticket.category }}</p>
<p><strong>Status:</strong> {{ ticket.status }}</p>
<p><strong>Created:</strong> {{ ticket.created_at }}</p>
<p><strong>Updated:</strong> {{ ticket.updated_at }}</p>

<h3>Update Status</h3>
<form method="post" action="{{ url_for('update_status', ticket_id=ticket.id) }}">
    <select name="status">
        <option>Open</option>
        <option>In Progress</option>
        <option>Resolved</option>
        <option>Closed</option>
    </select>
    <button type="submit">Update</button>
</form>

<h3>Comments</h3>
<ul>
    {% for comment in ticket.comments %}
        <li><strong>{{ comment.author }}</strong> ({{ comment.timestamp }}): {{ comment.message }}</li>
    {% endfor %}
</ul>

<h4>Add Comment</h4>
<form method="post" action="{{ url_for('add_comment', ticket_id=ticket.id) }}">
    <label>Your name:</label>
    <input name="author" required>
    <label>Message:</label>
    <textarea name="message" required></textarea>
    <button type="submit">Add Comment</button>
</form>

<br>
<a href="{{ url_for('list_tickets') }}">‚Üê Back to ticket list</a>
{% endblock %}

</body>
</html>